{% extends "base.html" %}
{% block title %}Set Password · Chat My History{% endblock %}
{% block content %}
  <h1 class="text-2xl font-bold mt-8 mb-4">Set Your Password</h1>
  <form method="post" action="/set-password" class="bg-white p-6 border rounded grid gap-4 max-w-md">
    <label>
      <span class="block mb-1">New Password</span>
      <div class="relative">
        <input id="setPassword" type="password" name="password" required class="w-full border rounded p-2 pr-12">
        <button id="toggleSetPassword" type="button" class="p-1 text-gray-600" style="position: absolute; top: 50%; right: .5rem; transform: translateY(-50%);">👁️</button>
      </div>
    </label>
    <label>
      <span class="block mb-1">Confirm Password</span>
      <div class="relative">
        <input id="setPasswordConfirm" type="password" name="confirm" required class="w-full border rounded p-2 pr-12">
        <button id="toggleSetPasswordConfirm" type="button" class="p-1 text-gray-600" style="position: absolute; top: 50%; right: .5rem; transform: translateY(-50%);">👁️</button>
      </div>
    </label>
    <button class="px-4 py-2 bg-black text-white rounded" type="submit">Save Password</button>
  </form>
  <script>
    (function () {
      function wireToggle(inputId, btnId) {
        const input = document.getElementById(inputId);
        const btn = document.getElementById(btnId);
        if (!input || !btn) return;
        btn.addEventListener('click', function () {
          const isPassword = input.type === 'password';
          input.type = isPassword ? 'text' : 'password';
          btn.textContent = isPassword ? '🙈' : '👁️';
        });
      }
      wireToggle('setPassword', 'toggleSetPassword');
      wireToggle('setPasswordConfirm', 'toggleSetPasswordConfirm');
    })();
  </script>
{% endblock %}


